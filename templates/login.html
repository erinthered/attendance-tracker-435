{% extends "base.html" %}
{% block body %}

<!-- File that is used to display the login form. File uses jinja2 -->

<div class="container column is-4">
        <div class="field">
            <h4 class="title">Login</h4>
            <div class="box">
    
                <form method="POST" action="{{ url_for('auth.login') }}">
                    {{ form.hidden_tag() }}
                    
                    {% if get_flashed_messages() %}
                        {% with category, message = get_flashed_messages(with_categories=true)[0] %}
                            {% if category == 'success' %}    
                                <div class="notification is-success">
                                    {{ message }}
                                </div>
                            {% elif category == 'failure' %}
                                <div class="notification is-danger">
                                    {{ message }}
                                </div>
                            {% endif %}
                        {% endwith %}
                    {% endif %}

                    <div class="field">
                        <p class="control has-icons-left">
                            {% if form.email.errors %}
                                {{ form.email(class="input is-medium is-danger", placeholder="Email") }}

                                <span class="icon is-small is-left">
                                    <i class="material-icons">email</i>
                                </span>
                                <p class="help is-danger">{{ form.email.errors[0] }}</p>
                            {% else %}
                                {{ form.email(class="input is-medium", placeholder="Email") }}

                                <span class="icon is-small is-left">
                                    <i class="material-icons">email</i>
                                </span>
                            {% endif %}
                        </p>     
                    </div>
    
                    <div class="field">    
                        <p class="control has-icons-left">
                            {% if form.password.errors %}
                                {{ form.password(class="input is-medium is-danger", placeholder="Password") }}

                                <span class="icon is-small is-left">
                                    <i class="material-icons">lock</i>
                                </span>
                                <p class="help is-danger">{{ form.password.errors[0] }}</p>
                            {% else %}
                                {{ form.password(class="input is-medium", placeholder="Password") }}

                                <span class="icon is-small is-left">
                                    <i class="material-icons">lock</i>
                                </span>
                            {% endif %}
                        </p>
                    </div>
    
                    <div class="buttons">
                        <!-- <button class="button is-link is-fullwidth">Login</button> -->
                        {{ form.login_btn(class="button is-link is-fullwidth", formmethod="POST")}}
                    </div>
    
                </form>
            </div>
        </div>
    </div>

{% endblock body %}    